user_roles <- fetchAdminData(odk_url <- "https://emro-polio-odk.org/v1/projects/2/forms/apmis_dashboard_admin_user_enrollment.svc/Submissions",
username <- "baertlein.luke@gmail.com",
password <- "%123Emro2024")
# ---- Configuration ----
data_url <- "https://emro-polio-analytics.org/data/all_apmis_data_list.Rds"
dest_dir <- file.path("revised_app", "data")
dest_file <- file.path(dest_dir, "all_apmis_data_list.Rds")
# ---- Credentials ----
# Preferably store these in .Renviron:
# EMRO_USER=your_username
# EMRO_PASS=your_password
username <- Sys.getenv("EMRO_USER")
EMRO_USER <- "cdc_emro"
EMRO_PASS <- "%123Emro2024"
# ---- Credentials ----
# Preferably store these in .Renviron:
# EMRO_USER=your_username
# EMRO_PASS=your_password
username <- Sys.getenv("EMRO_USER")
password <- Sys.getenv("EMRO_PASS")
username
username <- "cdc_emro"
password <- "%123Emro2024"
if (username == "" || password == "") {
stop("Missing credentials. Please set EMRO_USER and EMRO_PASS environment variables.")
}
# ---- Libraries ----
if (!requireNamespace("httr", quietly = TRUE)) {
install.packages("httr", repos = "https://cloud.r-project.org")
}
library(httr)
# ---- Create folder if needed ----
if (!dir.exists(dest_dir)) dir.create(dest_dir, recursive = TRUE)
# ---- Download file ----
cat("Downloading latest data file...\n")
resp <- GET(
url = data_url,
authenticate(username, password),
write_disk(dest_file, overwrite = TRUE),
timeout(120)
)
dest_file
# ---- Configuration ----
data_url <- "https://emro-polio-analytics.org/data/all_apmis_data_list.Rds"
dest_dir <- file.path("revised_app", "data")
dest_file <- file.path(dest_dir, "all_apmis_data_list.Rds")
# ---- Libraries ----
if (!requireNamespace("httr", quietly = TRUE)) {
install.packages("httr", repos = "https://cloud.r-project.org")
}
if (!requireNamespace("getPass", quietly = TRUE)) {
install.packages("getPass", repos = "https://cloud.r-project.org")
}
library(httr)
library(getPass)
# ---- Ask for credentials ----
cat("Please enter your EMRO Analytics credentials.\n")
username <- readline(prompt = "Username: ")
password <- getPass::getPass("Password: ")
# ---- Create folder if needed ----
if (!dir.exists(dest_dir)) dir.create(dest_dir, recursive = TRUE)
# ---- Download file ----
cat("\nDownloading latest data file...\n")
resp <- GET(
url = data_url,
authenticate(username, password),
write_disk(dest_file, overwrite = TRUE),
timeout(120)
)
getwd()
setwd("C:/Offline_Dashboard")
# ---- Configuration ----
data_url <- "https://emro-polio-analytics.org/data/all_apmis_data_list.Rds"
dest_dir <- file.path("revised_app", "data")
dest_file <- file.path(dest_dir, "all_apmis_data_list.Rds")
# ---- Libraries ----
if (!requireNamespace("httr", quietly = TRUE)) {
install.packages("httr", repos = "https://cloud.r-project.org")
}
if (!requireNamespace("getPass", quietly = TRUE)) {
install.packages("getPass", repos = "https://cloud.r-project.org")
}
library(httr)
library(getPass)
# ---- Ask for credentials ----
cat("Please enter your EMRO Analytics credentials.\n")
username <- readline(prompt = "Username: ")
password <- getPass::getPass("Password: ")
# ---- Create folder if needed ----
if (!dir.exists(dest_dir)) dir.create(dest_dir, recursive = TRUE)
# ---- Download file ----
cat("\nDownloading latest data file...\n")
resp <- GET(
url = data_url,
authenticate(username, password),
write_disk(dest_file, overwrite = TRUE),
timeout(120)
)
if (status_code(resp) == 200) {
cat("✓ Data successfully downloaded and saved to:\n  ", normalizePath(dest_file), "\n")
} else {
stop("✗ Download failed. Status code: ", status_code(resp))
}
